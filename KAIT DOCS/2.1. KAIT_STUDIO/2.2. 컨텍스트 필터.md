# 컨텍스트 필터

> 코드 동기 기준: 2026-02-03
> 원칙: 문서보다 코드가 우선입니다.

## 현재 구현
- FilterRegistry는 manifest 기반으로 필터를 자동 발견하고 output_type별로 그룹화합니다.
- ContextBuilder는 필터 DAG 의존성을 계산하여 병렬 실행 후 `BuildContextResponse`를 조립합니다.
- 핵심 출력 타입은 system_prompt_parts / history_parts / user_prompt_parts 입니다.
- DB 기반 필터와 sandbox/custom 필터를 함께 로드합니다.

## 프론트엔드 연결
- Sidebar의 Filters 섹션에서 필터 목록 확인/선택이 가능합니다.
- Processor Editor에서 perception_pipeline(필터 순서) 설정이 가능합니다.

## 백엔드 연결
- 레지스트리: `kait_os/core/context/filters/registry.py`
- 빌더: `kait_os/core/context/builder.py`
- 병렬 실행기: `kait_os/core/context/parallel_executor.py`
- 필터 구현 루트: `kait_os/core/context/filters/**/manifest.json`

## TODO
- [ ] 필터 DAG 시각화와 실행 시간 프로파일 UI 제공
- [ ] 필터별 output_type 충돌/대체 규칙 편집 UI 제공
- [ ] 멀티모달 전용 output_type 파이프라인 확장

## 관련 코드
- `kait_os/core/context/filters/registry.py`
- `kait_os/core/context/builder.py`
- `kait_os/core/context/parallel_executor.py`
- `kait_os/core/context/filters/`
