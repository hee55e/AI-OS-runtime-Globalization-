# 환경 변수 등록하기

> 코드 동기 기준: 2026-02-03
> 원칙: 문서보다 코드가 우선입니다.

## 현재 구현
- 환경변수는 사용자 단위로 저장되며 목록 응답은 secret 값을 마스킹하여 반환합니다.
- 키는 `/api/v1/users/me/env`에서 CRUD하고 카테고리(`llm_providers`, `tools`, `custom`)를 함께 저장합니다.
- 실행 시 `${env.KEY}` 해석은 User Secrets/Env -> System Env -> manifest fallback 순서로 처리됩니다.

## 프론트엔드 연결
- Settings > Env 탭에서 생성/수정/삭제 UI를 제공합니다.
- 커넥터 패널(FileSystem/Terminal/Messenger)도 내부적으로 Env 키를 저장합니다.

## 백엔드 연결
- 라우터: `kait_os/routers/system/user_env.py`
- 서비스: `kait_os/services/system/user_env_service.py`
- 도구 실행 시 env 해석: `kait_os/services/tools/tool_executor_service.py`

## TODO
- [ ] Provider별 필수 키 검사와 “즉시 테스트” 버튼 표준화
- [ ] Env 변경 시 영향받는 기능(모델/도구) 실시간 재검증

## 관련 코드
- `kait_os/routers/system/user_env.py`
- `kait_os/services/system/user_env_service.py`
- `kait_os/services/tools/tool_executor_service.py`
